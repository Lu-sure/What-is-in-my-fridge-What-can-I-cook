{"version":3,"sources":["index.js"],"names":["renderApp","document","getElementById","innerHTML","App","ListOfProducts","AddItemToList","SearchRecipes","listOfProducts","window","dataStorage","content","forEach","product","deleteListItem","value","splice","indexOf","recipes","isDataLoading","error","querySet","query","join","recipesContent","length","map","recipe","label","image","url","ingredientLines","item","editQuerySet","includes","push","loadData","Promise","resolve","fetch","then","response","json","data","performSearch","hits","catch","finally","module","hot","accept"],"mappings":";AAiBA,SAASA,IACPC,SAASC,eAAe,YAAYC,uBAC5BC,YAIV,SAASA,IACC,wDAEJC,YACAC,YACAC,kBAIN,SAASF,IACD,MAAA,eAAEG,GAAmBC,OAAOC,YAC9BC,IAAAA,EAAU,GAgBPA,OAfPH,EAAeI,QACbC,GACGF,uDAE8BE,kHAIZA,qJAIAA,+EAGhBF,8FACyFA,SAC5FA,EAGN,SAASL,IACC,MAAA,sRAUV,SAASQ,EAAeC,GACtBN,OAAOC,YAAYF,eAAeQ,OAAOP,OAAOC,YAAYF,eAAeS,QAAQF,GAAQ,GAC3FN,OAAOT,YAGT,SAASO,IACD,MAAA,QAAEW,EAAF,cAAWC,EAAX,MAA0BC,EAA1B,SAAiCC,GAAaZ,OAAOC,YACrDY,EAAQD,EAASE,KAAK,MAIxBC,IAAAA,EAAkB,GA8Bfb,OA5BHQ,IACFK,eAA8BF,0BAElB,OAAVF,IACFI,EAAiBJ,GAEfF,EAAQO,OAAS,IACnBD,kBAAiCF,IACjCE,GAAkBN,EACfQ,IAAI,EAAGC,QAAUC,MAAAA,EAAOC,MAAAA,EAAOC,IAAAA,EAAKC,gBAAAA,2CAGzBH,iCACMC,uCAEVE,EACCL,IAAIM,UACWA,UAEfT,KAAK,gDAEGO,qDAIhBP,KAAK,KA9BO,wNAiCAC,EAGnB,SAASS,EAAalB,GAChBN,OAAOC,YAAYW,SAASa,SAASnB,GACvCN,OAAOC,YAAYW,SAASL,OAAOP,OAAOC,YAAYW,SAASJ,QAAQF,GAAQ,GAE/EN,OAAOC,YAAYW,SAASc,KAAKpB,GAIrC,SAASqB,IACDd,MAAAA,EAAQb,OAAOC,YAAYW,SAASE,KAAK,KACzCO,qCAAyCR,yEAE3CA,GAAU,KAAVA,EAAc,CACVF,MAAAA,EAAQ,qCACPiB,OAAAA,QAAQC,QAAQ,CAAElB,MAAAA,IAKpBmB,OAHP9B,OAAOC,YAAYS,eAAgB,EACnCV,OAAOT,YAEAuC,MAAMT,GACVU,KAAKC,GAAYA,EAASC,QAC1BF,KAAKG,IAAS,CAAEA,KAAAA,KAGrB,SAASC,IACPnC,OAAOC,YAAYU,MAAQ,KAC3BX,OAAOC,YAAYQ,QAAU,GAE7BkB,IACGI,KAAK,EAAGpB,MAAAA,EAAOuB,KAAAA,MAGVvB,GAFJX,OAAOC,YAAYS,eAAgB,EAE/BC,EACFX,OAAOC,YAAYU,MAAQA,OACtB,GAAIuB,EAAM,CACT,MAAA,KAAEE,GAASF,EACbE,EAAKpB,OAAS,EAChBhB,OAAOC,YAAYQ,QAAU2B,EAE7BpC,OAAOC,YAAYU,MAAQ,oCAIhC0B,MAAM,IAAOrC,OAAOC,YAAYU,MAAQ,wBACxC2B,QAAQ,KACPtC,OAAOT,YACPS,OAAOC,YAAYW,SAAW,KA5JhC2B,OAAOC,KACTD,OAAOC,IAAIC,SAGbzC,OAAOC,YAAc,CACnBF,eAAgB,CAAC,QAAS,UAAW,YAAa,SAAU,OAAQ,SAAU,UAAW,QACzFa,SAAU,GACVF,eAAe,EACfC,MAAO,KACPF,QAAS,IAGXT,OAAOT,UAAYA,EACnBS,OAAOK,eAAiBA,EACxBL,OAAOwB,aAAeA,EACtBxB,OAAOmC,cAAgBA,EAiJvB5C","file":"What-is-in-my-fridge-What-can-I-cook.6cb4b840.js","sourceRoot":"..","sourcesContent":["if (module.hot) {\n  module.hot.accept();\n}\n\nwindow.dataStorage = {\n  listOfProducts: ['apple', 'chicken', 'olive oil', 'garlic', 'milk', 'tomato', 'shallot', 'fish'],\n  querySet: [],\n  isDataLoading: false,\n  error: null,\n  recipes: [],\n};\n\nwindow.renderApp = renderApp;\nwindow.deleteListItem = deleteListItem;\nwindow.editQuerySet = editQuerySet;\nwindow.performSearch = performSearch;\n\nfunction renderApp() {\n  document.getElementById('app-root').innerHTML = `\n        ${App()}\n    `;\n}\n\nfunction App() {\n  return `<div>\n    <h1>What's in your fridge</h1>\n    ${ListOfProducts()}\n    ${AddItemToList()}\n    ${SearchRecipes()}\n    </div>`;\n}\n\nfunction ListOfProducts() {\n  const { listOfProducts } = window.dataStorage;\n  let content = '';\n  listOfProducts.forEach(\n    product =>\n      (content += `\n      <li>\n        <label style=\"width: 50p;\">${product}\n            <input\n                type=\"checkbox\"\n                name=\"product\"\n                value=\"${product}\"\n                style=\"width: 100px;\"\n                onchange=\"window.editQuerySet(this.value)\"/>\n        </label>\n        <button value=\"${product}\" onclick=\"window.deleteListItem(this.value)\">delete</button>\n      </li>`),\n  );\n  return content\n    ? `<p>Product /<span style=\"color: royalblue; font-weight: 700;\"> Search by:</span> </p><ul>${content}</ul>`\n    : content;\n}\n\nfunction AddItemToList() {\n  return `<h2>Add products to your fridge:</h2>\n        <input\n            type=\"text\"\n            onchange=\"window.dataStorage.listOfProducts.push(this.value);\n            window.renderApp()\"\n        />\n        <p> for example: carrot, onion, potato, beef, bacon, eggs</p>\n    `;\n}\n\nfunction deleteListItem(value) {\n  window.dataStorage.listOfProducts.splice(window.dataStorage.listOfProducts.indexOf(value), 1);\n  window.renderApp();\n}\n\nfunction SearchRecipes() {\n  const { recipes, isDataLoading, error, querySet } = window.dataStorage;\n  const query = querySet.join(', ');\n  const content = `<h2>Search recipes by chosen products</h2>\n  <p>Pick items in the list above and click \"Search\" button.</p>\n  <button onclick=\"window.performSearch();\" style=\"color: royalblue; font-weight: 700;\">Search</button>`;\n  let recipesContent = ``;\n\n  if (isDataLoading) {\n    recipesContent = `<span>for ${query}</span><br>Loading...`;\n  }\n  if (error !== null) {\n    recipesContent = error;\n  }\n  if (recipes.length > 0) {\n    recipesContent = `Results for: ${query}`;\n    recipesContent += recipes\n      .map(({ recipe: { label, image, url, ingredientLines } }) => {\n        return `\n          <li>\n            <h3>${label}</h3>\n            <img src=\"${image}\"/>\n            <ul>\n            ${ingredientLines\n              .map(item => {\n                return `<li>${item}</li>`;\n              })\n              .join('')}\n            </ul>\n            <a href=\"${url}\" alt=\"\">See more</a>\n          </li>\n        `;\n      })\n      .join('');\n  }\n\n  return content + recipesContent;\n}\n\nfunction editQuerySet(value) {\n  if (window.dataStorage.querySet.includes(value)) {\n    window.dataStorage.querySet.splice(window.dataStorage.querySet.indexOf(value), 1);\n  } else {\n    window.dataStorage.querySet.push(value);\n  }\n}\n\nfunction loadData() {\n  const query = window.dataStorage.querySet.join(' ');\n  const url = `https://api.edamam.com/search?q=${query}&app_id=${process.env.EDAMAM_RECIPE_SEARCH_API_ID}&app_key=${process.env.EDAMAM_RECIPE_SEARCH_API_KEY}&from=0&to=5`;\n\n  if (query === '') {\n    const error = 'No products for request is chosen!';\n    return Promise.resolve({ error });\n  }\n  window.dataStorage.isDataLoading = true;\n  window.renderApp();\n\n  return fetch(url)\n    .then(response => response.json())\n    .then(data => ({ data }));\n}\n\nfunction performSearch() {\n  window.dataStorage.error = null;\n  window.dataStorage.recipes = [];\n\n  loadData()\n    .then(({ error, data }) => {\n      window.dataStorage.isDataLoading = false;\n\n      if (error) {\n        window.dataStorage.error = error;\n      } else if (data) {\n        const { hits } = data;\n        if (hits.length > 0) {\n          window.dataStorage.recipes = hits;\n        } else {\n          window.dataStorage.error = 'For your request is no answer.';\n        }\n      }\n    })\n    .catch(() => (window.dataStorage.error = 'Some error occurred.'))\n    .finally(() => {\n      window.renderApp();\n      window.dataStorage.querySet = [];\n    });\n}\n\nrenderApp();\n"]}